<header class="picture">
  <div class="cover">
    <h1>Your politicians are <div class="what-doing js-what-doing"></div></h1>
    <a href="#more-info" class="go-down"><%= image_tag 'arrow-down' %></a>
  </div>
</header>
<section id="more-info" class="content">
  <div class="container">
    <article class="info">
      <div class="icon left">Contenido del icono</div>
      <div class="description">
        <h2>Stay tuned</h2>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque molestie volutpat purus, eget faucibus dolor bibendum sed. Sed enim ipsum, egestas vel posuere pretium, sagittis at enim. Praesent fringilla nunc mauris. Proin lorem ex, venenatis eget lacus id, elementum volutpat lacus. Nullam eu posuere felis. Aliquam a mauris suscipit, dapibus neque in, ultrices erat. Vivamus suscipit varius magna, quis porta odio ultrices ac. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Aliquam erat volutpat.</p>
      </div>
    </article>
    <article class="info">
      <div class="description">
        <h2>Give your opinion</h2>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque molestie volutpat purus, eget faucibus dolor bibendum sed. Sed enim ipsum, egestas vel posuere pretium, sagittis at enim. Praesent fringilla nunc mauris. Proin lorem ex, venenatis eget lacus id, elementum volutpat lacus. Nullam eu posuere felis. Aliquam a mauris suscipit, dapibus neque in, ultrices erat. Vivamus suscipit varius magna, quis porta odio ultrices ac. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Aliquam erat volutpat.</p>
      </div>
      <div class="icon right">contenido del icono</div>
    </article>
    <div class="clearfix"></div>
    <div class="button-container">
      <a class="button">Sign Up</a>
    </div>
  </div>
</section>
<section class="content bottom-section">
  <div class="container">
    <h2>Cities we are working on</h2>
    <div class="col-sm-4">Col1</div>
    <div class="col-sm-4 middle">Col2</div>
    <div class="col-sm-4">Col3</div>
    <div class="clearfix"></div>
  </div>
</section>

<script type="text/javascript">
  function scrollToAnchor(aid){
    var aTag = $("[id='"+ aid +"']");
    $('html,body').animate({scrollTop: aTag.offset().top},'slow');
  }

  function headerLinkClick(){
    $('.go-down').on('click', function(){
      scrollToAnchor('more-info');
      return false;
    });
  }

  var currentIndex = 0;
  var messageText = ["doing good", "doing bad", "robing you"];
  var timeoutId;
  var stopTimeout = false;

  function addHeaderMessage(){
    timeoutId = setTimeout(function(){
      var current = $('.js-what-doing').html();
      var following = current.length;

      $('.js-what-doing').append(messageText[currentIndex][following]);
      clearTimeout(timeoutId);

      if(following < messageText[currentIndex].length){
        addHeaderMessage();
      } else {
        if(!stopTimeout){
          timeoutId = setTimeout(function(){
            eraseHeaderMessage();
          }, 2500);
        }
      }
    }, 100);
  }

  function eraseHeaderMessage(){
    timeoutId = setTimeout(function(){
      var what = $('.js-what-doing');
      what.html(what.html().slice(0, -1));
      
      clearTimeout(timeoutId);
      if(what.html().length > 0){
        eraseHeaderMessage();
      } else {
        timeoutId = setTimeout(function(){
          currentIndex++;
          if(currentIndex == messageText.length){
            currentIndex = 0;
            stopTimeout = true;
          }
          addHeaderMessage();
        }, 100);
      }
    }, 100);
  }

  $(document).on('ready', function(){
    headerLinkClick();
    setTimeout(function(){
      addHeaderMessage();
    }, 500);
  });
</script>